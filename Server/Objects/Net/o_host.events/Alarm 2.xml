<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<event category="ALARM" id="2">
  <actions>
    <action id="603" library="1">
      <!--action name: Code-->
      <kind>CODE</kind>
      <allowRelative>false</allowRelative>
      <question>false</question>
      <canApplyTo>true</canApplyTo>
      <actionType>CODE</actionType>
      <functionName/>
      <relative>false</relative>
      <not>false</not>
      <appliesTo>.self</appliesTo>
      <arguments>
        <argument kind="STRING">if global.sv_sync_type &lt; 2 {alarm[2] = global.sv_rate; exit;}
//the new sync proto
with o_pl
{
    if variable_local_exists('cl_is_bot')
    {
        kb_left_n = kb_left;
        kb_rght_n = kb_rght;
    }
    dyclearbuffer(0);
    dywritebyte(7, 0);
    dywritebyte(cl_id, 0);
    dywritebyte(kb_left_n, 0);
    dywritebyte(kb_rght_n, 0);
    dywritebyte(kb_jump, 0);
    dywritebyte(kb_lkup, 0);
    dywritebyte(kb_lkdn, 0);
    dywritebyte(st_talk, 0);
    dywriteshort(x, 0);
    dywriteshort(y, 0);
    with o_pl
    {   
        dysendmessage(cl_tcp, 0, 0, 0);
    }
    plr_send_speed();
}

alarm[2] = global.sv_rate;
</argument>
      </arguments>
    </action>
  </actions>
</event>
